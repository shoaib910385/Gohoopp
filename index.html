<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Specially For You | A Love Story</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800&family=Sacramento&family=Indie+Flower&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cream: '#FFF9EE',
                        softPink: '#FF8FA3',
                        deepRed: '#D65D5D',
                        accentGreen: '#E6F4EA',
                    },
                    fontFamily: {
                        sans: ['Nunito', 'sans-serif'],
                        script: ['Sacramento', 'cursive'],
                        hand: ['Indie Flower', 'cursive']
                    }
                }
            }
        }
    </script>

    <style>
        /* Modern UI Tweaks */
        body { background-color: #FFF9EE; overflow-x: hidden; touch-action: manipulation; }
        .glass-card { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.3); }
        
        /* Cassette Logic */
        .cassette-tilted { transform: rotate(-3deg) translateY(10px); transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .cassette-active { transform: rotate(0deg) translateY(0); border-color: #FF8FA3; box-shadow: 0 20px 40px rgba(214, 93, 93, 0.2); }
        
        /* Smooth Page Transitions */
        .screen { transition: all 0.8s ease-in-out; position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .hidden-screen { opacity: 0; pointer-events: none; transform: translateY(20px); }
        
        /* Sealing Animation */
        #seal-overlay { position: fixed; inset: 0; background: rgba(255, 245, 228, 0.7); backdrop-filter: blur(15px); z-index: 100; display: none; align-items: center; justify-content: center; flex-direction: column; }
        
        /* Floating Assets */
        .float-img { animation: float 4s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0) rotate(var(--rot)); } 50% { transform: translateY(-15px) rotate(var(--rot)); } }
        
        /* Gears */
        .gear-spin { animation: spin 2s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .btn-main { background: #D65D5D; color: white; border-radius: 999px; padding: 12px 32px; font-weight: 800; box-shadow: 0 10px 20px rgba(214, 93, 93, 0.3); transition: all 0.3s; display: flex; align-items: center; gap: 8px; }
        .btn-main:active { transform: scale(0.95); }
    </style>
</head>
<body class="font-sans text-[#5D4037]">

    <div id="main-app" class="relative w-full h-screen max-w-[480px] mx-auto overflow-hidden">
        
        <div id="scr-pass" class="screen">
            <h1 class="font-script text-6xl text-deepRed mb-4">Hey Love üòò</h1>
            <p class="mb-8 opacity-60">Please enter the secret password</p>
            <input type="password" id="pass-val" placeholder="Password" class="w-64 p-4 rounded-2xl border-2 border-softPink text-center text-xl focus:outline-none focus:ring-4 focus:ring-softPink/20 transition-all mb-6">
            <button onclick="checkPass()" class="btn-main">Unlock ‚ù§Ô∏è</button>
        </div>

        <div id="scr-land" class="screen hidden-screen">
            <div class="relative w-full glass-card p-10 rounded-[40px] border-2 border-accentGreen shadow-2xl">
                <img src="assets/pineapple.png" style="--rot: 12deg" class="float-img absolute -top-12 -right-4 w-28 drop-shadow-lg" alt="Cat Pineapple">
                
                <h4 class="font-script text-3xl text-softPink mb-2">welcome to my little thought...</h4>
                <h1 class="text-5xl font-extrabold text-deepRed mb-6 tracking-tight">Hey You</h1>
                
                <p class="text-lg leading-relaxed mb-10 text-gray-600">I wanted to do a tiny something because you mean a lot to me.</p>
                <p class="text-sm text-softPink font-bold mb-4">Tap below, okay? ‚ú®</p>
                
                <button onclick="go('scr-land', 'scr-env')" class="btn-main w-full justify-center text-xl py-5">
                    Open This üíñ <span class="text-2xl">‚Üí</span>
                </button>

                <img src="assets/glasses.png" style="--rot: -10deg" class="float-img absolute -bottom-10 -left-6 w-24 drop-shadow-lg" alt="Cat Glasses">
            </div>
        </div>

        <div id="scr-env" class="screen hidden-screen">
            <h4 class="text-orange-400 font-bold mb-2">Straight from my heart</h4>
            <h1 class="font-script text-5xl text-deepRed mb-12">A Little Note üíå</h1>
            
            <div class="relative w-72 h-48 cursor-pointer group" onclick="openEnv()">
                <div id="env-flap" class="absolute top-0 w-full h-0 border-l-[144px] border-r-[144px] border-t-[100px] border-l-transparent border-r-transparent border-t-[#E0C9A6] z-30 transition-transform duration-700 origin-top"></div>
                <div class="absolute bottom-0 w-full h-32 bg-[#DCBFA0] rounded-b-xl z-20 shadow-xl"></div>
                <div id="letter" class="absolute bottom-4 left-4 right-4 h-32 bg-white rounded-lg z-10 transition-transform duration-700 flex items-center justify-center p-4">
                    <p class="font-hand text-gray-400">Pull me out...</p>
                </div>
            </div>
            
            <div id="env-btn" class="mt-20 opacity-0 pointer-events-none transition-opacity duration-500">
                <button onclick="go('scr-env', 'scr-letter')" class="btn-main">Read It ‚ú®</button>
            </div>
        </div>

        <div id="scr-letter" class="screen hidden-screen">
            <div class="bg-white w-full h-[80vh] rounded-3xl shadow-2xl p-8 relative overflow-y-auto border border-pink-100">
                <img src="assets/ribbon.png" class="absolute top-4 right-4 w-20 opacity-80" alt="Cat Ribbon">
                <h3 class="font-bold text-2xl text-deepRed mb-6 flex items-center gap-2">
                    <span class="bg-orange-100 p-2 rounded-full">üíù</span> Hey My Favorite Person
                </h3>
                <div class="font-hand text-xl leading-relaxed text-gray-700 space-y-6">
                    <p>Hey Love, I may have messed up a bit. I never meant to hurt you, sometimes my brain trips over my heart.</p>
                    <p>What I *do* know for sure is how much you matter to me. You're incredibly special to me, and I hate the idea of being the reason you felt anything less than loved.</p>
                    <p>Thank you for being you. I hope this makes you smile, even just a little.</p>
                </div>
                <p class="text-right font-script text-4xl text-deepRed mt-10">Always yours üíï</p>
            </div>
            <button onclick="go('scr-letter', 'scr-music')" class="btn-main mt-6">Keep Going ‚ú®</button>
        </div>

        <div id="scr-music" class="screen hidden-screen">
            <h1 class="font-script text-5xl text-deepRed mb-8">Reminded Me Of You</h1>
            
            <div class="cassette-tilted w-full glass-card p-6 rounded-3xl mb-6 relative border-2" id="cas-1">
                <div class="flex justify-between text-[10px] font-bold text-gray-400 mb-2"><span>SIDE A</span><span>KARAN AUJLA</span></div>
                <h2 class="text-xl font-bold text-center mb-4">For a Reason</h2>
                <div class="bg-gray-800 h-14 rounded-xl flex items-center justify-center gap-10">
                    <div class="gear w-8 h-8 rounded-full border-4 border-dashed border-gray-600"></div>
                    <div class="gear w-8 h-8 rounded-full border-4 border-dashed border-gray-600"></div>
                </div>
                <button onclick="toggleMusic(1, this)" class="absolute -bottom-4 left-1/2 -translate-x-1/2 w-14 h-14 bg-deepRed rounded-full flex items-center justify-center text-white shadow-xl">
                    <span class="text-2xl play-icon">‚ñ∂</span>
                </button>
            </div>

            <div class="cassette-tilted w-full bg-[#F3F0FF] p-6 rounded-3xl mb-12 relative border-2" id="cas-2">
                <div class="flex justify-between text-[10px] font-bold text-gray-400 mb-2"><span>SIDE B</span><span>KARAN AUJLA</span></div>
                <h2 class="text-xl font-bold text-center mb-4">Boyfriend</h2>
                <div class="bg-gray-800 h-14 rounded-xl flex items-center justify-center gap-10">
                    <div class="gear w-8 h-8 rounded-full border-4 border-dashed border-gray-600"></div>
                    <div class="gear w-8 h-8 rounded-full border-4 border-dashed border-gray-600"></div>
                </div>
                <button onclick="toggleMusic(2, this)" class="absolute -bottom-4 left-1/2 -translate-x-1/2 w-14 h-14 bg-indigo-500 rounded-full flex items-center justify-center text-white shadow-xl">
                    <span class="text-2xl play-icon">‚ñ∂</span>
                </button>
            </div>

            <button onclick="go('scr-music', 'scr-flip')" class="btn-main">Next ‚ú®</button>
        </div>

        <div id="scr-flip" class="screen hidden-screen">
            <h4 class="font-script text-3xl text-softPink mb-2">just saying...</h4>
            <h1 class="text-3xl font-extrabold text-center mb-8">Little Things I Messed Up</h1>
            
            <div class="relative w-72 h-96 [perspective:1000px] cursor-pointer" onclick="this.querySelector('.flip-inner').classList.toggle('[transform:rotateY(180deg)]')">
                <div class="flip-inner relative w-full h-full transition-all duration-700 [transform-style:preserve-3d] shadow-2xl rounded-[30px]">
                    <div class="absolute inset-0 bg-white p-8 flex flex-col items-center justify-center text-center [backface-visibility:hidden] rounded-[30px]">
                        <p class="text-2xl font-bold mb-4">I may have been a little dumb sometimes ü•≤</p>
                        <p class="text-gray-400">Tap to see why...</p>
                    </div>
                    <div class="absolute inset-0 bg-[#FFF5F5] p-6 flex flex-col items-center justify-center text-center [transform:rotateY(180deg)] [backface-visibility:hidden] rounded-[30px] border-4 border-white">
                        <img src="assets/tomato.png" class="w-32 mb-4 rounded-2xl" alt="Cat Tomato">
                        <p class="font-bold text-deepRed mb-2">Context:</p>
                        <p class="text-sm text-gray-600">No bad intentions, just bad timing. I'm working on it. ü•∫</p>
                    </div>
                </div>
            </div>
            
            <button onclick="go('scr-flip', 'scr-final')" class="btn-main mt-10">One Last Thing ‚û°Ô∏è</button>
        </div>

        <div id="scr-final" class="screen hidden-screen">
            <h4 class="font-script text-3xl text-orange-400 mb-2">the grand finale...</h4>
            <h1 class="text-4xl font-extrabold text-deepRed mb-8">Will You Forgive Me?</h1>
            
            <div class="glass-card p-10 rounded-[40px] w-full text-center relative mb-10 border-2 border-red-100">
                <img src="assets/spidey.png" class="absolute -top-16 left-1/2 -translate-x-1/2 w-32 drop-shadow-xl" alt="Spidey Cat">
                <p class="text-xl mb-6 mt-8">I hope this reminded you how important you are to me.</p>
                <p class="text-2xl font-black text-deepRed">You Matter To Me.</p>
                <div class="mt-6 flex justify-center gap-1">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
            </div>

            <button id="seal-btn" onclick="sealIt()" class="btn-main w-full justify-center py-5 text-xl">Seal It üíå</button>
        </div>

    </div>

    <div id="seal-overlay">
        <div class="bg-white p-12 rounded-[50px] shadow-2xl flex flex-col items-center">
            <div class="relative w-24 h-24 mb-6">
                <div class="absolute inset-0 border-8 border-softPink/20 rounded-full"></div>
                <div class="absolute inset-0 border-8 border-softPink rounded-full border-t-transparent animate-spin"></div>
                <span class="absolute inset-0 flex items-center justify-center text-4xl">üíå</span>
            </div>
            <h2 class="text-2xl font-bold text-deepRed animate-pulse">Wrapping this up gently...</h2>
        </div>
    </div>

    <script>
        // GLOBAL AUDIO PLAYER (Fixed: Doesn't stop on page change)
        let globalAudio = new Audio();
        const songUrls = {
            1: "https://files.catbox.moe/4giqf5.ogg",
            2: "https://files.catbox.moe/uhkx81.ogg"
        };

        function go(from, to) {
            document.getElementById(from).classList.add('hidden-screen');
            setTimeout(() => {
                document.getElementById(from).classList.add('hidden');
                document.getElementById(to).classList.remove('hidden');
                setTimeout(() => document.getElementById(to).classList.remove('hidden-screen'), 50);
            }, 800);
        }

        function checkPass() {
            if(document.getElementById('pass-val').value.toUpperCase() === "UMMM") {
                go('scr-pass', 'scr-land');
            } else {
                alert("Wrong password! Try UMMM");
            }
        }

        function openEnv() {
            document.getElementById('env-flap').style.transform = 'rotateX(180deg)';
            document.getElementById('letter').style.transform = 'translateY(-100px)';
            document.getElementById('env-btn').classList.remove('opacity-0', 'pointer-events-none');
        }

        function toggleMusic(id, btn) {
            const cas = document.getElementById(`cas-${id}`);
            const gears = cas.querySelectorAll('.gear');
            const icon = btn.querySelector('.play-icon');

            if (globalAudio.src === songUrls[id] && !globalAudio.paused) {
                globalAudio.pause();
                icon.innerText = "‚ñ∂";
                cas.classList.remove('cassette-active');
                gears.forEach(g => g.classList.remove('gear-spin'));
            } else {
                // Instant play logic
                globalAudio.src = songUrls[id];
                globalAudio.play();
                
                // Reset all UIs first
                document.querySelectorAll('.cassette-tilted').forEach(c => c.classList.remove('cassette-active'));
                document.querySelectorAll('.gear').forEach(g => g.classList.remove('gear-spin'));
                document.querySelectorAll('.play-icon').forEach(i => i.innerText = "‚ñ∂");

                // Activate current
                icon.innerText = "‚è∏";
                cas.classList.add('cassette-active');
                gears.forEach(g => g.classList.add('gear-spin'));
            }
        }

        function sealIt() {
            const overlay = document.getElementById('seal-overlay');
            overlay.style.display = 'flex';
            
            setTimeout(() => {
                overlay.innerHTML = `
                    <div class="text-center animate-pop">
                        <div class="text-8xl mb-6">üíñ</div>
                        <h1 class="font-script text-6xl text-deepRed mb-4">Sent With Love</h1>
                        <p class="text-xl font-bold">You Matter To Me</p>
                        <button onclick="location.reload()" class="mt-10 underline opacity-50">See Again</button>
                    </div>
                `;
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            }, 3000);
        }
    </script>
</body>
</html>
